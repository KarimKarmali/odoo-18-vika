<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <record id="view_account_form" model="ir.ui.view">
            <field name="name">view_account_form</field>
            <field name="model">account.account</field>
            <field name="inherit_id" ref="account.view_account_form" />
            <field name="arch" type="xml">
                <xpath expr="//div[@name='button_box']" position="inside">
                    <button
                        class="oe_stat_button"
                        icon="fa-leaf"
                        name="action_see_carbon_line_origin_ids"
                        type="object"
                        invisible="carbon_line_origin_qty &lt; 1"
                    >
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_value">
                                <field
                                    name="carbon_line_origin_qty"
                                    nolabel="1"
                                    widget="statinfo"
                                />
                            </span>
                            <span class="o_stat_text">Carbon Footprint</span>
                        </div>
                    </button>
                </xpath>
                <xpath expr="//notebook" position="inside">
                    <page string="Sustainability" name="page_carbon_settings">
                        <group>
                            <field invisible="1" name="carbon_allowed_factor_ids" />
                            <label for="carbon_in_is_manual" string="Mode" />
                            <div class="d-inline-flex">
                                <div
                                    class="opacity-50"
                                    invisible="not carbon_in_is_manual"
                                >Undefined</div>
                                <div
                                    invisible="carbon_in_is_manual"
                                    style="font-weight: bold;"
                                >Undefined</div>
                                <field
                                    class=""
                                    name="carbon_in_is_manual"
                                    nolabel="1"
                                    style="margin-left: 8px;"
                                    widget="boolean_toggle"
                                    options="{'autosave': False}"
                                />
                                <field invisible="1" name="carbon_in_mode" />
                                <div
                                    class="opacity-50"
                                    invisible="carbon_in_is_manual"
                                >Set</div>
                                <div
                                    invisible="not carbon_in_is_manual"
                                    style="font-weight: bold;"
                                >Set</div>
                            </div>
                            <field
                                invisible="carbon_in_is_manual"
                                name="carbon_in_fallback_reference"
                                widget="reference"
                            />
                            <field
                                invisible="not carbon_in_is_manual"
                                name="carbon_in_use_distribution"
                            />
                            <field
                                invisible="not carbon_in_is_manual or carbon_in_use_distribution"
                                name="carbon_in_factor_id"
                                string="Emission Factor"
                                required="carbon_in_is_manual and not carbon_in_use_distribution"
                            />
                            <field invisible="1" name="model_name" />
                            <field
                                colspan="2"
                                context="{'default_carbon_type': 'in', 'default_res_model': model_name, 'default_res_id': id}"
                                force_save="1"
                                invisible="not carbon_in_is_manual or not carbon_in_use_distribution"
                                name="carbon_in_distribution_line_ids"
                                nolabel="1"
                                required="carbon_in_use_distribution"
                            >
                                <list editable="bottom">
                                    <field name="factor_id" />
                                    <field name="percentage" widget="percentage" />
                                    <field column_invisible="1" name="carbon_type" />
                                    <field
                                        force_save="1"
                                        column_invisible="1"
                                        name="res_model"
                                    />
                                </list>
                            </field>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>
    </data>
</odoo>
